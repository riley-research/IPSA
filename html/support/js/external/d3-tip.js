d3.tip=function(){function t(t){i=e(t),s=i.createSVGPoint(),document.body.appendChild(f)}function e(t){return t=t.node(),"svg"==t.tagName.toLowerCase()?t:t.ownerSVGElement}function n(){var t=u||d3.event.target,e={},n=t.getScreenCTM(),r=t.getBBox(),o=r.width,l=r.height,f=r.x,i=r.y,a=document.documentElement.scrollTop||document.body.scrollTop,c=document.documentElement.scrollLeft||document.body.scrollLeft;return s.x=f+c,s.y=i+a,e.nw=s.matrixTransform(n),s.x+=o,e.ne=s.matrixTransform(n),s.y+=l,e.se=s.matrixTransform(n),s.x-=o,e.sw=s.matrixTransform(n),s.y-=l/2,e.w=s.matrixTransform(n),s.x+=o,e.e=s.matrixTransform(n),s.x-=o/2,s.y-=l/2,e.n=s.matrixTransform(n),s.y+=l,e.s=s.matrixTransform(n),e}var r=function(){return"n"},o=function(){return[0,0]},l=function(){return" "},f=function(){var t=d3.select(document.createElement("div"));return t.style({position:"absolute",opacity:0,pointerEvents:"none",boxSizing:"border-box"}),t.node()}(),i=null,s=null,u=null;t.show=function(){var e=Array.prototype.slice.call(arguments);e[e.length-1]instanceof SVGElement&&(u=e.pop());var n,i=l.apply(this,e),s=o.apply(this,e),p=r.apply(this,e),d=d3.select(f),y=0;for(d.html(i).style({opacity:1,"pointer-events":"none"});y--;)d.classed(c[y],!1);return n=a.get(p).apply(this),d.classed(p,!0).style({top:n.top+s[0]+"px",left:n.left+s[1]+"px"}),t},t.hide=function(){return nodel=d3.select(f),nodel.style({opacity:0,"pointer-events":"none"}),t},t.attr=function(e,n){if(arguments.length<2&&"string"==typeof e)return d3.select(f).attr(e);var r=Array.prototype.slice.call(arguments);return d3.selection.prototype.attr.apply(d3.select(f),r),t},t.style=function(e,n){if(arguments.length<2&&"string"==typeof e)return d3.select(f).style(e);var r=Array.prototype.slice.call(arguments);return d3.selection.prototype.style.apply(d3.select(f),r),t},t.direction=function(e){return arguments.length?(r=null==e?e:d3.functor(e),t):r},t.offset=function(e){return arguments.length?(o=null==e?e:d3.functor(e),t):o},t.html=function(e){return arguments.length?(l=null==e?e:d3.functor(e),t):l};var a=d3.map({n:function(){var t=n();return{top:t.n.y-f.offsetHeight,left:t.n.x-f.offsetWidth/2}},s:function(){var t=n();return{top:t.s.y,left:t.s.x-f.offsetWidth/2}},e:function(){var t=n();return{top:t.e.y-f.offsetHeight/2,left:t.e.x}},w:function(){var t=n();return{top:t.w.y-f.offsetHeight/2,left:t.w.x-f.offsetWidth}},nw:function(){var t=n();return{top:t.nw.y-f.offsetHeight,left:t.nw.x-f.offsetWidth}},ne:function(){var t=n();return{top:t.ne.y-f.offsetHeight,left:t.ne.x}},sw:function(){var t=n();return{top:t.sw.y,left:t.sw.x-f.offsetWidth}},se:function(){var t=n();return{top:t.se.y,left:t.e.x}}}),c=a.keys();return t};